* å®‰è£…archlinuxçš„è®°å½•è¿‡ç¨‹

** 0. ç‰¹åˆ«æ„Ÿè°¢

+ [[https://www.bilibili.com/video/BV1ag411K725][ã€archlinuxã€‘åŒç³»ç»ŸçœŸæœºå®‰è£…æ¼”ç¤º]]

  #+begin_quote
  upä¸»æ˜¯åŒç³»ç»Ÿå®‰è£…ï¼Œæ˜¯å¯ä»¥è®©archlinuxä¸windowså…±å­˜çš„æ–¹æ¡ˆã€‚
  #+end_quote
  
+ [[https://arch.icekylin.online/guide/rookie/graphic-driver#intel-%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1][è§£å†³intelæ ¸æ˜¾åœ¨KDE sddmä¸‹èŠ±å±çš„é—®é¢˜]]

  #+begin_quote
  *å³ä¸å®‰è£…xf86-video-intel* è€Œæ˜¯ä½¿ç”¨è‡ªå¸¦çš„Xorgçš„modesettingsæ¥é©±åŠ¨sddmå›¾å½¢ç•Œé¢ã€‚å…³äºã€‚è¿™é‡Œç‰¹åˆ«æ„Ÿè°¢ [[https://github.com/icekylin][icekylin]]
  #+end_quote
 
** 1. efiåˆ†åŒºæ‰©å®¹

å› ä¸ºåœ¨åŒç³»ç»Ÿä¸‹Windowsé»˜è®¤çš„efi systemä¸º100MiBå¤§å°ï¼ŒåŸºæœ¬æ˜¯ä¸å¤Ÿçš„

å½“æˆ‘ä»¬çš„å½“å‰efiåŒºå®¹é‡æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯ç”Ÿæˆæ–°çš„bootloaderå¼•å¯¼æ–‡ä»¶å•Šï¼Œè¿˜æ˜¯è¯´ä»€ä¹ˆè®¾ç½®ä»€ä¹ˆhackintoshçš„efiæ–‡ä»¶ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¸å¤Ÿçš„ã€‚

å¦‚æœefiåˆ†åŒºå®¹é‡ç¡®å®æ˜¯æ¯”è¾ƒå°‘çš„è¯ï¼Œæˆ‘ä»¬å®‰è£…Arch Linuxçš„æ—¶å€™å°±ä¼šåœ¨grub-installå¯¼è‡´ç”Ÿæˆä¸äº†blæ–‡ä»¶Grub Error: No Left Space To Create A Directoryï¼Œå¯¼è‡´è¯†åˆ«ä¸äº†æ–°çš„ç³»ç»Ÿå¼•å¯¼æ–‡ä»¶ï¼Œè£…äº†ä¹Ÿæ˜¯ç™½è£…ï¼Œä¸‹ä¸€æ¬¡è¿›ç³»ç»Ÿè¿˜æ˜¯windowsã€‚

æ‰€ä»¥å¿…é¡»è¦å…ˆåœ¨Windowsé‡Œ ~ç£ç›˜ç®¡ç†(Win+Xå¼¹å‡ºèœå•ï¼Œç„¶åé€‰æ‹©ç£ç›˜ç®¡ç†)~ éƒ½ä¼šå…ˆåˆ†å‡ºæ¯”å¦‚500Mæˆ–1000Mçš„ç©ºé—´å‡ºæ¥ï¼Œç„¶åé€šè¿‡ ~cmd~ æ¥å°† *æ›´æ¢efiåˆ†åŒºï¼Œä»è€Œè®©ArchLinuxä¸windowséƒ½ä½¿ç”¨æ­¤efiåˆ†åŒº* (è¿™ä»…ä»…åªæ˜¯æˆ‘ä¸ªäººçš„æ–¹æ¡ˆå“ˆï¼)
#+begin_src sh
  # administratoræ‰“å¼€cmd

  diskpart

  list disk
  
  select disk <åˆ†å‡º1024MiBçš„é‚£ä¸ªdiskçš„ç¼–å·>
  
  list partition
  
  create partition efi
  
  format quick fs = fat32
  
  # åˆ›å»ºæŒ‚è½½ç‚¹åˆ«åP
  assign letter = P

  exit  
#+end_src

ç„¶åæ›´æ¢efi systemåˆ°æŒ‚è½½ç‚¹åˆ«åPä¸Š
#+begin_src sh
  # ä¸€èˆ¬æ¥è¯´ 2018å¹´åçš„ç”µè„‘éƒ½æœ‰UEFI
  bcdboot C:\Windows /s P: /f UEFI
#+end_src

ç„¶å *é‡å¯* å°±å¯ä»¥ *æ›´æ¢åˆ° windows çš„ efiåˆ†åŒº åˆ° æ‚¨è‡ªå·±åˆšæ‰è®¾ç½®çš„è‡³å°‘500Mæˆ–è‡³å°‘1000Mçš„åˆ†åŒºä¸Šäº†*

** 2. ä¸‹è½½é•œåƒ

æˆ‘ä»¬åˆ°è¿™é‡Œ [[https://archlinux.org/download/][arch.org]] æ¥ä¸‹è½½ torrent ç£é“¾æ–‡ä»¶

æˆ‘æ¨èçš„æ˜¯ä½¿ç”¨ ~bitComet~ (æ‚¨å¯ä»¥åœ¨windowsä¸Šé€šè¿‡chocoæˆ–wingetæ¥å®‰è£…) ä¸‹è½½ torrent é‡Œé¢çš„å†…å®¹ (è®°å¾—æœ€å¥½ä¸‹è½½åæŒ‚ä¸€ä¼šbitCometï¼Œæ¯•ç«ŸP2Pæ¨¡å¼äººäººä¸ºæˆ‘æˆ‘ä¸ºäººäººï¼Œä¸è¿‡è¢«PCDNæ£€æµ‹åˆ°çš„è¯é‚£å¦è¯´ï¼Œä¸€èˆ¬åªæ˜¯ä¸æ»¥ç”¨éƒ½æ˜¯èƒ½ç»§ç»­æŒ‚çš„)

ç„¶ååˆ»ç›˜ï¼Œæˆ‘æ¨èç”¨ ~rufus 3.2~ æ¯”è¾ƒæ—©æœŸçš„ç‰ˆæœ¬(åæ­£æˆ‘ä¸ªäººçš„ç»éªŒæ˜¯ä¸è¦ç”¨ ~rufus 4.0~ ä¹‹ä¸Šçš„ç‰ˆæœ¬)ï¼Œå¯ä»¥åˆ»å½•iso

æ‰¾ä¸ªæ–°Uç›˜ï¼ŒæŒ‰ä¸‹ ~ç¡®å®š~ åé€‰ç”¨ ~ddæ¨¡å¼~ æ¥åˆ»å½•

ç„¶ååˆ°windowsçš„ ~ç£ç›˜ç®¡ç†~ (ä½¿ç”¨Win+Xå¼¹å‡ºèœå•æ¥é€‰æ‹©ç£ç›˜ç®¡ç†) *æˆ‘ä»¬ä¸€å®šè¦ä¿è¯åˆ†å‡ºæ¥çš„åŒºåŸŸï¼Œåœ¨ [windowsç£ç›˜ç®¡ç†] ä¸­ï¼Œçœ‹ä¸Šå»çš„é¢œè‰²æ˜¯ [é»‘è‰²] çš„æ‰è¡Œ*

ç„¶ååˆ†åŒºåˆ†ä¸ªå¤§æ¦‚100æ¥Gå§ï¼ŒåŸºæœ¬ä¸Šå°±è¶³å¤Ÿäº†ã€‚(æ‚¨è¦åˆ†å¾—å¤§ä¸€ç‚¹ä¹Ÿå¯ä»¥çš„ï¼Œæœ€èµ·ç ä¿è¯æœ‰30Gçš„ç©ºé—´å°±è¶³å¤Ÿäº†)

ç„¶åæ’Uç›˜ï¼Œæ’ä¸Šå°±è¡Œäº†ï¼Œè¿™æ—¶åœ¨windowsä¸Š ~è‚¯å®šæ˜¯è¯†åˆ«ä¸å‡ºæ¥çš„é‡Œé¢æœ‰ä»€ä¹ˆæ–‡ä»¶~

åˆ«ç®¡ï¼Œæˆ‘ä»¬ ~æŒ‰ä½Shiftï¼Œç„¶åç”¨é¼ æ ‡ç‚¹å‡»Windowsçš„é‡å¯~ ç„¶åå°±ä¼šè¿›å…¥åˆ° ~windowsç–‘éš¾æ‚ç—‡~ é‚£é‡Œï¼Œç„¶åé€‰æ‹© ~è¿›å…¥å›ºä»¶è®¾ç½®~

ç„¶ååœ¨å›ºä»¶è®¾ç½®é‡Œï¼Œæ‚¨è‡ªå·±å¯»æ‰¾ ~ä½¿ç”¨Uç›˜~ å¯åŠ¨çš„æ–¹å¼ï¼Œå°±å¯ä»¥ ~è¿›å…¥archiso~ äº†

** 3. archisoè¿‡ç¨‹è®°å½•
*** (1) è”ç½‘iwctl
#+begin_src sh
  # è¿›å…¥interactiveç•Œé¢
  iwctl

  # æŸ¥çœ‹ç¬”è®°æœ¬çš„ç½‘å¡(wlan0)
  device list

  # è®©ç¬”è®°æœ¬ç½‘å¡(wlan0)æ‰«æé™„è¿‘ç½‘ç»œ
  station wlan0 scan

  # è®©ç¬”è®°æœ¬ç½‘å¡(wlan0)è·å–é™„è¿‘ç½‘ç»œ
  station wlan0 get-networks

  # è”ç½‘
  station wlan0 connect ç½‘ç»œ

  # é€€å‡ºiwctl
  exit
#+end_src

*** (2) è®¾ç½®ç³»ç»Ÿæ—¶é—´
#+begin_src sh
  # è®¾ç½®ç³»ç»Ÿæ—¶é—´
  timedatectl set-ntp true
#+end_src


*** (3) fdiskåˆ†åŒº
#+begin_src sh
  # æŸ¥çœ‹ç¡¬ç›˜åˆ†åŒºæƒ…å†µ(ç¬”è®°æœ¬å”¯ä¸€çš„ä¸€ä¸ªå›ºæ€ç¡¬ç›˜: /dev/sda)
  lsblk

  # æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯
  # æˆ‘è¿™é‡Œçš„æƒ…å†µæ˜¯ï¼Œæˆ‘ä¸ä¸€å®šèƒ½ä¿è¯æ‚¨çš„ [ç£ç›˜åç§°] ä¹Ÿæ˜¯ä¸æ˜¯è¿™æ ·ï¼Œå¦‚æœä¸ç¡®å®šçš„è¯ï¼Œè¯·åˆ°ä¸€æ­¥ä¸€æ­¥è·Ÿç€è§†é¢‘æ•™ç¨‹æ¥ https://www.bilibili.com/video/BV1ag411K725
  # + ESPåˆ†åŒº: /dev/sda4
  # + 135GiBç©ºé—´ä¸»åˆ†åŒº: /dev/sda8
  fdisk -l

  # ç„¶åè¿›è¡Œåˆå§‹åŒ–
  # è¿™ä¸€æ­¥å°± [ç›¸å½“äºæ˜¯å°†windowsç£ç›˜ç®¡ç†çš„âš«é»‘è‰²åˆ†åŒºï¼Œåˆå§‹åŒ–ä¸ºwindowsç£ç›˜ç®¡ç†çš„ğŸ”µè“è‰²åˆ†åŒºï¼Œæˆ‘è‡ªå·±å°±æ˜¯å¤§è‡´æè¿°ï¼Œå¸Œæœ›æ‚¨èƒ½ç†è§£åˆ°é‚£ä¸ªæ„æ€å°±è¡Œ]
  fdisk /dev/sda
  # Press n    # n å°±æ˜¯ né”®
  # Press RET  # RET å°±æ˜¯ Enteré”®
  # Press RET  # RET å°±æ˜¯ Enteré”®
  # Press RET  # RET å°±æ˜¯ Enteré”®
  # Press w    # w å°±æ˜¯ wé”®

  # ç„¶åç»™æ­¤åˆ†åŒºåŠ ä¸Šç­¾åï¼Œæœ‰ext4ã€zfsã€btrfsç­‰ç­‰
  # æˆ‘ä¸ªäººåªæ¨èä½¿ç”¨ ext4 è€Œä¸å»ºè®®åœ¨éå•†ä¸šå‘è¡Œç‰ˆä¸Šä½¿ç”¨ btrfs (åŸå› æ˜¯éå•†ä¸šç‰ˆçš„btrfsç‚¸äº†æ²¡å¾—ä¿®ï¼Œä¸ªäººä¸ä¼šä¿®btrfså°±è¿™æ ·)
  # /dev/sda8 æ˜¯æˆ‘çš„135GiBç©ºé—´ä¸»åˆ†åŒºï¼Œæˆ‘ä¸ä¸€å®šèƒ½ä¿è¯æ‚¨çš„ [ç£ç›˜åç§°] ä¹Ÿæ˜¯ä¸æ˜¯è¿™æ ·ï¼Œå¦‚æœä¸ç¡®å®šçš„è¯ï¼Œè¯·åˆ°ä¸€æ­¥ä¸€æ­¥è·Ÿç€è§†é¢‘æ•™ç¨‹æ¥ https://www.bilibili.com/video/BV1ag411K725
  mkfs.ext4 /dev/sda8
#+end_src

*** (4) æŒ‚è½½åˆ†åŒº

è§£é‡Š

| åè¯        | åè¯è§£é‡Š                                                                             |
|-------------+-------------------------------------------------------------------------------------|
| ~æŒ‚è½½mount~ | ~åœ¨ä¸€é¢—B+æ–‡ä»¶æ ‘é‡Œé¢ï¼Œå°†ä¸¤ä¸ªæ ‘èŠ‚ç‚¹è¿æ¥èµ·æ¥çš„æ„æ€~ æˆ‘è‡ªå·±å°±æ˜¯å¤§è‡´æè¿°ï¼Œå¸Œæœ›æ‚¨èƒ½ç†è§£åˆ°é‚£ä¸ªæ„æ€å°±è¡Œ |
| ~æŒ‚è½½åˆ†åŒº~ | è¿™ä¸ªè¯æŒ‡çš„æ˜¯ ~å°†å­˜æ”¾æ“ä½œç³»ç»Ÿçš„ç£ç›˜ï¼Œæ”¾åœ¨æƒ³è¦æ”¾çš„ä½ç½®è·¯å¾„ç©ºé—´ä¸Š~ æˆ‘è‡ªå·±å°±æ˜¯å¤§è‡´æè¿°ï¼Œå¸Œæœ›æ‚¨èƒ½ç†è§£åˆ°é‚£ä¸ªæ„æ€å°±è¡Œ |

#+begin_src sh
  # æˆ‘ä¸ä¸€å®šèƒ½ä¿è¯æ‚¨çš„ [ç£ç›˜åç§°] ä¹Ÿæ˜¯ä¸æ˜¯è¿™æ ·ï¼Œå¦‚æœä¸ç¡®å®šçš„è¯ï¼Œè¯·åˆ°ä¸€æ­¥ä¸€æ­¥è·Ÿç€è§†é¢‘æ•™ç¨‹æ¥ https://www.bilibili.com/video/BV1ag411K725  
  # æˆ‘ä¸ä¸€å®šèƒ½ä¿è¯æ‚¨çš„ [ç£ç›˜åç§°] ä¹Ÿæ˜¯ä¸æ˜¯è¿™æ ·ï¼Œå¦‚æœä¸ç¡®å®šçš„è¯ï¼Œè¯·åˆ°ä¸€æ­¥ä¸€æ­¥è·Ÿç€è§†é¢‘æ•™ç¨‹æ¥ https://www.bilibili.com/video/BV1ag411K725
  # æˆ‘ä¸ä¸€å®šèƒ½ä¿è¯æ‚¨çš„ [ç£ç›˜åç§°] ä¹Ÿæ˜¯ä¸æ˜¯è¿™æ ·ï¼Œå¦‚æœä¸ç¡®å®šçš„è¯ï¼Œè¯·åˆ°ä¸€æ­¥ä¸€æ­¥è·Ÿç€è§†é¢‘æ•™ç¨‹æ¥ https://www.bilibili.com/video/BV1ag411K725
  
  # æŒ‚è½½ä¸»åˆ†åŒº           (æˆ‘çš„ç¬”è®°æœ¬æ˜¯/dev/sda8)åˆ°/mnt
  mount /dev/sda8 /mnt

  # æŒ‚è½½EFI Systemåˆ†åŒº   (æˆ‘çš„ç¬”è®°æœ¬æ˜¯/dev/sda4)åˆ°/mnt/boot		# UEFIå¯åŠ¨æ˜¯è¿™æ ·çš„ï¼ŒMBRå¯åŠ¨åº”è¯¥ä¸ç”¨æŒ‚è½½
  mkdir /mnt/boot
  mount /dev/sda4 /mnt/boot	# æ­£æ˜¯ç”±äºè¿™é‡Œï¼Œæ‰€ä»¥ä¼šé‡åˆ°åé¢çš„ESPå¤§å°å®¹é‡ä¸å¤Ÿå¯¼è‡´çš„ä¸€ä¸ªå°é—®é¢˜: Grub Error: No Left Space To Create A Directory.  
#+end_src


*** (5) è®¾ç½®é•œåƒæº
#+begin_src sh
  # ä½¿ç”¨vimæ‰“å¼€mirrorlist
  vim /etc/pacman.d/mirrorlist

  # å¹¶æ·»åŠ ä¸‹é¢çš„ustc(ä¸­ç§‘å¤§)çš„é•œåƒæº
  Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
#+end_src

*** (6) pacstrapå®‰è£…å¿…è¦çš„è½¯ä»¶
#+begin_src sh
# ä½œç”¨: è®© pacstrapè£…ä¿®å¸ˆå‚… å¯¹ç€ /mnt è¿™ä¸ªæ–°å®¶ï¼Œè¿›è¡Œè£…ä¿®(å®‰è£…è½¯ä»¶)
pacstrap /mnt base base-devel linux linux-firmware dhcpcd
#+end_src

*** (7) genfstab
#+begin_src sh

  # ä½œç”¨: genfstabï¼Œå¥½åƒæ˜¯è®©å®ƒèƒ½è¯†åˆ«åˆ°SWAPåˆ†åŒºä¹‹ç±»çš„
  genfstab -L /mnt >> /mnt/etc/fstab
  
  # æŸ¥çœ‹(æˆ‘çš„ç¬”è®°æœ¬)æƒ…å†µ
  # /dev/sda8   =>   /	   btrfs
  # /dev/sda4   =>   /boot   vfat
  cat /mnt/etc/fstab
#+end_src

*** (8) arch-chroot
#+begin_src sh
  # ä½œç”¨: æŠŠè‡ªå·±æ¬è¿›äº†æ¯›èƒšæˆ¿æ–°å®¶(æ­¤æ—¶çš„/mntæ–°å®¶ï¼Œè¿˜æ˜¯åˆšè£…ä¿®å®Œï¼Œè£…ä¿®å¸ˆå‚…æ²¡æœ‰æ‰“æ‰«å«ç”Ÿï¼Œè‡ªå·±çš„è¡Œæè¿˜æ²¡æ”¾ç½®è¿›å»)
  arch-chroot /mnt

  # æ•ˆæœ
  # root@archiso ~#  ä¼šæ”¹æˆ=>ä¼šæ”¹æˆ  [root@archiso /]#
#+end_src
```

*** (9) è®¾ç½®æ—¶åŒº
#+begin_src sh
  # è®¾ç½®æ—¶é—´åŒºåŸŸä¸ºäºšæ´²/ä¸Šæµ·(Asia/Shanghai)
  ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
#+end_src

*** (10) åŒæ­¥æ—¶é—´ä¸ºç¡¬ä»¶æ—¶é—´
#+begin_src sh
  # hwclock  
  hwclock --systohc
#+end_src

*** (11) å®‰è£…ä¸€äº›è½¯ä»¶
#+begin_src sh
  # vimåœ¨å¿«é€Ÿç¼–è¾‘ä¸€äº›æ–‡ä»¶è¿˜æ˜¯å¾ˆæœ‰ç”¨æ­¦ä¹‹åœ°çš„ï¼Œè¿˜æ˜¯ååˆ†æ¨èå®‰è£…vim.....
  pacman -S vim dialog wpa_supplicant ntfs-3g networkmanager netctl
#+end_src
```

*** (12) è®¾ç½®æœ¬æœºç¯å¢ƒ
#+begin_src sh
  # è®¾ç½®è¯­è¨€
  # en_US.UTF-8 UTF-8	æ”¹æˆ=>æ”¹æˆ    en_US.UTF-8 UTF-8
  # zh_CN.UTF-8 UTF-8	æ”¹æˆ=>æ”¹æˆ    zh_CN.UTF-8 UTF-8
  # zh_TW.UTF-8 UTF-8	æ”¹æˆ=>æ”¹æˆ    zh_TW.UTF-8 UTF-8
  # zh_HK.UTF-8 UTF-8	æ”¹æˆ=>æ”¹æˆ    zh_HK.UTF-8 UTF-8
  vim /etc/locale.gen

  # ç”Ÿæˆè¯­è¨€é¡¹
  locale-gen

  # è®¾ç½®ç³»ç»Ÿç¯å¢ƒè¯­è¨€
  #			æ”¹æˆ=>æ”¹æˆ    LANG=en_US.UTF-8
  vim /etc/locale.conf

  # è®¾ç½®ä¸»æœºå( ä¸»æœºå è¦è®°ä½)
  # 			æ”¹æˆ=>æ”¹æˆ    kle(ä½ è‡ªå·±è®¾ç½®ä¸€ä¸ªåç§°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œè®¾ç½®kleï¼Œåé¢å°±è¦ç”¨åˆ°kle)
  vim /etc/hostname

  # æ¿€æ´»ä¸»æœºå
  # 127.0.0.1 localhost
  # ::1 localhost
  # 127.0.1.1 kle.localdomain kle  (kleæ˜¯æˆ‘è‡ªå·±çš„ ä¸»æœºå )
  vim /etc/hosts

  # è®¾ç½®rootå¯†ç 
  passwd

  # å®‰è£…intel CPUå¾®ç 
  pacman -S intel-ucode
#+end_src

*** (13) è®¾ç½®bootloaderå¼•å¯¼ç¨‹åº
#+begin_src sh  
  # ä¸å¼„ä¼šæ€æ ·ï¼Ÿé‚£bootloaderå°±æ‰¾ä¸åˆ°archlinux
  # é‚£ä¹ˆæ‚¨ä¸‹æ¬¡è¿›å…¥ç³»ç»Ÿè¿˜æ˜¯windowsï¼Œå³ä½¿æ‚¨è¿›å…¥äº†bioså›ºä»¶è®¾ç½®ï¼Œä»ç„¶åªä¼šæ‰¾åˆ°windowsçš„å¼•å¯¼æ–‡ä»¶
  # bootloaderä½œç”¨: ç”¨çš„grubæ¥è®©ç¡¬ä»¶é©±åŠ¨èµ·æ¥ï¼Œæ¥è·‘è½¯ä»¶(è¿™é‡Œçš„è½¯ä»¶æŒ‡çš„æ˜¯æ“ä½œç³»ç»Ÿ)

  # os-prober: æ˜¯ä¸ºäº†å®‰è£…è®©archlinuxä¸windows10åŒç³»ç»Ÿå…±å­˜
  # ä¸æ—¶ä¿±è¿›: å¥½åƒè¯´ä¸ç”¨è£…è¿™ä¸ªäº†ï¼Œä½†ä¸ºäº†ä»¥é˜²ä¸‡ä¸€è¿˜æ˜¯è£…ä¸Šå§ï¼
  pacman -S os-prober ntfs-3g
  pacman -S grub efibootmgr

  # æ˜¯çš„æ²¡é”™ï¼å°å¼æœºå°±æ˜¯å› ä¸ºESPåˆ†åŒºå¤ªå°äº†(å°å¼æœºè£…äº†windows10é»˜è®¤æ˜¯100MiB, è§†é¢‘æ¼”ç¤ºæ˜¯200MiBçš„EFI Systemï¼Œæˆ‘è‡ªå·±çš„ç¬”è®°æœ¬æ˜¯1000MiBçš„EFI System)ï¼Œå¯¼è‡´Grub Error: No Space Left to Create A Directory.
  # æ˜¯è¿™ä¸ªåŸå› : è§†é¢‘ä¸»æ•™çš„æ˜¯æŠŠ [efiåˆ†åŒº] å…¨éƒ¨æŒ‚è½½åˆ° [æŒ‚è½½ç‚¹: /boot] ä¸‹ã€‚
  # æ˜¯è¿™ä¸ªæ–¹æ¡ˆ: æŠŠ [efiåˆ†åŒº] å•ç‹¬æŒ‚è½½åˆ° [æŒ‚è½½ç‚¹: /efi] ä¸‹ã€‚
  # Installation finished. No error reported.
  grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub

  # grub-mkconfig è¾“å‡ºç”Ÿæˆgrubé…ç½®æ–‡ä»¶(æ­¤æ—¶ç¯å¢ƒ: Uç›˜é‡Œé¢ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯åªæœ‰ [archlinux] è¯¥è½¯ä»¶(è¿™é‡Œçš„è½¯ä»¶æŒ‡çš„æ˜¯æ“ä½œç³»ç»Ÿ))
  cd /boot && mkdir grub
  cd ../
  grub-mkconfig -o /boot/grub/grub.cfg
#+end_src

*** (14) å‡†å¤‡æ‹”uç›˜
#+begin_src sh
  exit
  # æ•ˆæœ: [root@archiso /]#   ä¼šæ”¹æˆ=>ä¼šæ”¹æˆ    root@archiso ~#
  
  reboot
  # é‡å¯ï¼Œé»‘å±äº†å°±æ‹”uç›˜ï¼Œé˜²æ­¢äºŒæ¬¡è¿›å…¥archiso(è¿™å¾—çœ‹ä¸»æ¿é‚£æ—¶çš„è®¾ç½®)

  # å¤‡æ³¨
  # + å¦‚æœæ‚¨å‡ºå…ˆäº† "watchdog did not stop" çš„æç¤ºï¼Œæœ€å¥½ç­‰å¾…ä¸ª10æ¥åˆ†é’Ÿå·¦å³ï¼Œä¸è¦æ‹”Uç›˜ï¼Œç­‰å¾…äº†10åˆ†é’Ÿä¹‹åç›´æ¥ç¡¬ä»¶å…³æœºç„¶åå†æ‹”Uç›˜ä¸ç„¶è£…ä¸ä¸Šçš„ï¼Œå¦‚æœå‡ºç°äº†å¹¶å¼ºè¡Œæ‹”ä¸‹æ¥çš„è¯éœ€è¦é‡è£…ä»è¿™å¥è¯ä¹‹ä¸Šé¢çš„æ¯ä¸€æ­¥ã€‚
  # + åæ­£æˆ‘è‡ªå·±ä»Šå¹´4æœˆä»½å®‰è£…çš„æ—¶å€™ï¼Œåœ¨æˆ‘è‡ªå·±è¿™å°ç¬”è®°æœ¬ä¸Šæ˜¯è¿™æ ·çš„
  # + ä½†æ˜¯ç°åœ¨2024å¹´10æœˆ1æ—¥çš„é•œåƒä¸ç”¨ç­‰äº†ï¼Œç›´æ¥å½“ç”µè„‘é»‘å±å°±èƒ½ç›´æ¥æ‹”Uç›˜äº†ã€‚

  # OK
  # + å¦‚æœæ‚¨æ‹”äº†Uç›˜ä¹‹åï¼Œä¸€èˆ¬æ¥è¯´å°±ä¼šè¿›å…¥åˆ° [å…¨æ–°å®‰è£…å¥½çš„ArchLinuxäº†]
  # + ç„¶åæˆ‘ä»¬åœ¨ttyä¸Šç™»é™†
  # + è¾“å…¥ "root" å­—ç¬¦
  # + è¾“å…¥ "æ‚¨åˆšåˆšæ‚¨è‡ªå·±è®¾ç½®è¿‡çš„å¯†ç " (å¯†ç ä¸ä¼šå›æ˜¾çš„)  
#+end_src

*** (15) è®©grubï¼ŒåŒæ ·èƒ½å‘ç°windowsçš„å…¥å£
#+begin_src sh
  # è¿™æ˜¯æˆ‘è·Ÿç€ https://www.bilibili.com/video/BV1ag411K725 è§†é¢‘æ•™ç¨‹æ¥ä¸€æ­¥ä¸€æ­¥åšçš„ï¼Œè§†é¢‘æ€ä¹ˆæ ·æˆ‘å°±æ€ä¹ˆæ ·
  # 
  # ä½œç”¨
  # + ç”Ÿæˆgrubå¼•å¯¼æ–‡ä»¶ï¼Œä»è€Œåœ¨grubå¼•å¯¼èœå•æ—¶ï¼Œä¹Ÿèƒ½é€‰æ‹©windows10å»è·‘è½¯ä»¶(è¿™é‡Œçš„è½¯ä»¶æŒ‡çš„æ˜¯windows10æ“ä½œç³»ç»Ÿ)èµ·æ¥
  # + grub-mkconfig è¾“å‡ºç”Ÿæˆgrubé…ç½®æ–‡ä»¶(æ­¤æ—¶ç¯å¢ƒ: ç¬”è®°æœ¬é‡Œé¢)
  grub-mkconfig -o /boot/grub/grub.cfg	       	
#+end_src

*** (16) åœ¨æœ¬æœºç¯å¢ƒä¸‹çš„é…ç½®
#+begin_src sh
  # ç½‘ç»œè¿æ¥
  # + å¦‚æœæ˜¯æœ‰çº¿ç½‘çº¿è¿æ¥çš„è¯ï¼Œå°±å·²ç»è¿ä¸Šç½‘äº†ã€‚äºæ˜¯è·³åˆ°SWAPåˆ†åŒºdd ifé‚£é‡Œ
  # + å¦‚æœæ˜¯æ— çº¿è¿æ¥çš„è¯ï¼Œå¿…é¡»è¿›è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚

  # é¦–å…ˆï¼Œæ— è®ºæœ‰çº¿æ— çº¿ç½‘ç»œè¿æ¥ï¼Œå¿…é¡»å…ˆå¼€å¯æœåŠ¡
  systemctl enable NetworkManager
  systemctl start NetworkManager
  # æ— çº¿è”ç½‘(å¦‚æœæ˜¯æœ‰çº¿çš„è¯ï¼Œåœ¨å¼€å¯ä¸Šé¢çš„æœåŠ¡åå°±å¯ä»¥ç›´æ¥è”ç½‘äº†)
  # + å½“ç„¶ç”¨ [nmtui] å…¶å®æ›´å¿«ã€‚
  nmcli dev wifi list
  nmcli dev wifi connect "ç½‘ç»œå" password "å¯†ç "

  # è®¾ç½®SWAPåˆ†åŒº(SWAPåˆ†åŒºä¸º2048MiB~2GiBå¤§å°)
  dd if=/dev/zero of=/swapfile bs=1M count=2048 status=progress
  chmod 600 /swapfile
  mkswap /swapfile
  swapon /swapfile

  # æ‰‹æ“ä¸€ä¸‹fstabï¼Œæ¥å¼€å¯SWAP
  vim /etc/fstab

  # ä½¿ç”¨vimæ¥æ·»åŠ ä¸‹é¢çš„æ–‡æœ¬
  /swapfile     none    swap      defaults                0 0
#+end_src

*** (17) åˆ›å»ºè‡ªå·±æ—¥ç”¨çš„ä¸€ä¸ªç”¨æˆ·ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªrootç”¨æˆ·
#+begin_src sh
  # æˆ‘çš„æ—¥ç”¨ç”¨æˆ·åæ˜¯: kle
  useradd -m -G wheel kle

  # ç„¶åç¬¬1æ¬¡è¾“å…¥ æ—¥ç”¨ç”¨æˆ·åçš„å¯†ç 
  # ç„¶åç¬¬2æ¬¡è¾“å…¥ æ—¥ç”¨ç”¨æˆ·åçš„å¯†ç 
  passwd æ—¥ç”¨ç”¨æˆ·å
#+end_src

*** (18) ä¸€äº›è®¾ç½®
#+begin_src sh
  # å®‰è£…sudo
  pacman -S sudo

  # ç¼–è¾‘å™¨è®¾ç½®(ä¸ºäº†ç”¨visudo) sudo vim /etc/sudoers
  ln -s /usr/bin/vim /usr/bin/vi

  # ç¼–è¾‘è¿›è¡Œä¸‹é¢çš„ä¿®æ”¹
  visudo
  #%wheel ALL=(ALL:ALL) ALL    æ”¹æˆ=>æ”¹æˆ    %wheel ALL=(ALL:ALL) ALL

  # åˆ‡æ¢åˆ°æ—¥ç”¨ç”¨æˆ·åï¼Œå¹¶ä¸”é€šè¿‡suï¼Œæ¥ç»™äºˆrootæƒé™ (æˆ‘è‡ªå·±çš„æ—¥ç”¨ç”¨æˆ·åæ˜¯: kle)
  su kle
#+end_src

*** (19) å‡†å¤‡å®‰è£…DE
#+begin_src sh
  # å¼€å¯ä¸€äº›å¯ç”¨ä»“åº“æº
  #[multilib]			     æ”¹æˆ=>æ”¹æˆ    [multilib]
  #include=/etc/pacman.d/mirrorlist    æ”¹æˆ=>æ”¹æˆ    include=/etc/pacman.d/mirrorlist
  #				     æ”¹æˆ=>æ”¹æˆ    [archlinuxcn]					
  #				     æ”¹æˆ=>æ”¹æˆ    Server = https://repo.archlinuxcn.org/$arch
  sudo vim /etc/pacman.conf

  # å¼ºåˆ¶å¼€æ»šï¼Œä¿æŒä¸archlinuxcnæºçš„åŒæ­¥
  sudo pacman -Syy

  # archlinuxcnçš„å¯†é’¥ç¯
  # + å¥½åƒæ˜¯å› ä¸ºäººæ‰‹ä¸å¤Ÿï¼Œåˆ é™¤äº†ä¸€ä¸ªmaster key
  # + å¯¼è‡´fcæ•™æˆçš„å¯ä¿¡ç¨‹åº¦è®¾ç½®åˆ°marginal trustå¯¼è‡´çš„
  # + ç°åœ¨æ‰‹åŠ¨è¦ä¿¡ä»»sudo pacman -Syyåå­˜åœ¨æœºå™¨æœ¬åœ°çš„fcæ•™æˆfarseerfcçš„å¯†é’¥
  sudo pacman-key --lsign-key "farseerfc@archlinux.org"
  # è¿™ä¸€æ­¥çš„é’©å­å‡½æ•°è¿è¡Œæ—¶é—´ï¼Œè¾ƒé•¿ï¼Œé™é™ç­‰å¾…å°±å¥½ã€‚
  sudo pacman -S archlinuxcn-keyring

  # æ˜¾å¡é©±åŠ¨
  # + archlinuxï¼Œæ‹’ç»Nå¡é—­æºé©±åŠ¨ï¼Œä¸ç„¶KPè­¦å‘Šï¼æˆ‘ç¬”è®°æœ¬æœ‰Intelæ ¸æ˜¾å°±ç”¨æ ¸æ˜¾äº†
  # + è‡´æ•¬åœ¨ArchLinuxä¸‹ä½¿ç”¨Nå¡é—­æºé©±åŠ¨çš„å‹‡å£«(å°±æ˜¯é‚£ä¸ªå®˜ç½‘ä¸‹è½½ä¸‹æ¥çš„xxxx.runè„šæœ¬æ‰§è¡Œçš„é‚£ä¸ª)

  # æ¥ä¸‹æ¥è¦è£…ä»€ä¹ˆåŒ…çš„è¯´æ˜
  # + https://wiki.archlinuxcn.org/wiki/Xorg#%E5%AE%89%E8%A3%85
  # + æ¯”å¦‚åœ¨æˆ‘ä¸ªäººçš„ç¬”è®°æœ¬ä¸Šï¼Œä¸è¦å®‰è£…è¿™ä¸ªxf86-intel-videoï¼Œå¦åˆ™å°†ä¼šå¯¼è‡´sddmç™»å½•ç•Œé¢èŠ±å±é—ªçƒ
  # + å¯¼è‡´æ°¸è¿œæ— æ³•é€šè¿‡sddmåˆ‡æ¢å…¶ä½™çš„æ¡Œé¢ç¯å¢ƒ(ä½†æ˜¯ç›²è¾“å¯†ç æ˜¯å¯ä»¥ç™»å½•KDE plasma on Waylandçš„)
  # + ä¸å®‰è£…xf86-video-intelæ—¶ï¼Œä¼šé»˜è®¤ä½¿ç”¨è‡ªå¸¦çš„Xorgçš„modesettingã€‚
  sudo pacman -S mesa     	       			   

  # å®‰è£…ç¾ä¸½ç°ä»£çš„KDE
  sudo pacman -S xorg plasma kde-applications sddm network-manager-applet
  # + ç„¶åä¸€ç›´RET(Enter)ä¸‹å»å°±è¡Œäº†ï¼ŒæŒ‰ä¸ªå¤§æ¦‚10æ¥æ¬¡éƒ½ç¡®å®šå°±è¡Œäº†
  # + å› ä¸º https://www.bilibili.com/video/BV1ag411K725 è§†é¢‘æ•™ç¨‹ä¹Ÿæ˜¯å…¨éƒ¨ç¡®å®šçš„
#+end_src
		
*** (20) å¯åŠ¨æ¡Œé¢æœåŠ¡
#+begin_src sh
  # æ‰“å¼€æ¡Œé¢ç®¡ç†å™¨sddmï¼Œå®ƒçš„åŠŸèƒ½å³åç§° "æ¡Œé¢ç®¡ç†å™¨" åæ­£æ‰“å¼€æœåŠ¡å°±æ˜¯äº†
  sudo sytemctl enable sddm

  # å…³é—­ä¸€äº›æœåŠ¡
  sudo systemctl disable netctl

  # å¼€å¯ç½‘ç»œæœåŠ¡
  sudo systemctl enable NetworkManager
#+end_src

*** (21) å®‰è£…ä¸­æ–‡å­—ä½“
#+begin_src sh  
  sudo pacman -S wqy-microhei wqy-microhei-lite wqy-bitmapfont wqy-zenhei ttf-arphic-ukai ttf-arphic-uming adobe-source-han-sans-cn-fonts noto-fonts-cjk
#+end_src

*** (22) paruå®‰è£…
#+begin_src sh
  # è¿™ä¸€æ­¥å¯ä»¥å…ˆåœ¨é…ç½®äº†æœ¬åœ°ä»£ç†åå†å®‰è£…ï¼Œä¸ç„¶è£…ä¸€äº›cratesåŒ…æŒºæ…¢çš„
  # è¿™ä¸€æ­¥å¯ä»¥å…ˆåœ¨é…ç½®äº†æœ¬åœ°ä»£ç†åå†å®‰è£…ï¼Œä¸ç„¶è£…ä¸€äº›cratesåŒ…æŒºæ…¢çš„
  # è¿™ä¸€æ­¥å¯ä»¥å…ˆåœ¨é…ç½®äº†æœ¬åœ°ä»£ç†åå†å®‰è£…ï¼Œä¸ç„¶è£…ä¸€äº›cratesåŒ…æŒºæ…¢çš„
  cd $home
  mkdir .paru/ && cd .paru/
  sudo pacman -S git
  git clone https://aur.archlinux.org/paru.git 
  cd paru
  makepkg -si
#+end_src

*** (23) é‡æ–°è®¾ç½®æœ¬æœºè¯­è¨€
#+begin_src sh
  
  # é‡æ–°è®¾ç½®æœ¬æœºè¯­è¨€
  sudo vim /etc/locale.conf
  # LANG=en_US.UTF-8    æ”¹æˆ=>æ”¹æˆ    LANG=zh_CN.UTF-8
#+end_src

*** (24) å¤ªç¾ä¸½å•¦KDE
#+begin_src sh
  sudo reboot
#+end_src

*** (25) ä¸€äº›å®‰è£…
#+begin_src sh
  # å®‰è£…fcitx5å…¨å®¶æ¡¶
  sudo pacman -S fcitx5-im fcitx5-chinese-addons fcitx5-rime fcitx5-material-color

  # ç¼–è¾‘å¼€æœºå¯åŠ¨fcitx5
  #        	æ”¹æˆ=>æ”¹æˆ	GTK_IM_MODULE=fcitx
  #        	æ”¹æˆ=>æ”¹æˆ	QT_IM_MODULE=fcitx
  #        	æ”¹æˆ=>æ”¹æˆ	XMODIFIERS=@im=fcitx
  #        	æ”¹æˆ=>æ”¹æˆ    	SDL_IM_MODULE=fcitx
  sudo vim /etc/environment

  # åœ¨KDEä¸‹ï¼Œéœ€è¦
  #	> ç³»ç»Ÿè®¾ç½®
  #	> é”®ç›˜
  #	> è™šæ‹Ÿé”®ç›˜
  #	> é€‰æ‹© "Fcitx5" (è€Œä¸æ˜¯ "Fcitx5 Waylandå¯åŠ¨å™¨(å®.."))
  #
  # æ¥è®©KDEæ¡Œé¢ç¯å¢ƒï¼Œè¯†åˆ«å‡ºfcitx5ã€‚ä»è€Œè‡ªå·±åœ¨send-keyæ—¶ï¼Œèƒ½å‘C-SPCåˆ°KDE on Waylandä¸Šï¼Œè¿›è¡Œåˆ‡æ¢è¾“å…¥æ³•ã€‚

  # ç”µæ± å……ç”µé˜ˆå€¼
  # + éœ€è¦çœ‹å‚å•†çš„ç¡¬ä»¶æ”¯æŒ
  # + å¦‚æœç”¨windows11æ—¶èƒ½å¼€å¯çš„è¯è¿™é‡Œä¹Ÿèƒ½å¼€å¯ï¼Œå¦‚æœæ²¡æœ‰çš„è¯é‚£å°±å¼€ä¸äº†)
  sudo systemctl disable powertop
  sudo systemctl disable tlp
  sudo systemctl stop powertop
  sudo systemctl stop tlp

  # æ‚¨è‡ªå·±çœ‹æƒ…å†µä¿®æ”¹ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œæ˜¯å½“å……ç”µå°‘äº75%å°±å¼€å§‹å……ç”µï¼Œå……ç”µåˆ°80%å°±åœä¸‹ã€‚
  # + å…·ä½“çš„å¿…é¡»çœ‹ä¸»æ¿å‚å•† [å¦‚ä½•å®‰æ’è¿™äº›ç¡¬ä»¶çš„åç§°]
  # + å…·ä½“çš„å¿…é¡»çœ‹ä¸»æ¿å‚å•† [å¦‚ä½•å®‰æ’è¿™äº›ç¡¬ä»¶çš„åŠŸèƒ½]
  sudo vim /etc/tlp.conf
  #START_CHARGE_THRESH_BAT0=75    =>    START_CHARGE_THRESH_BAT0=75
  #STOP_CHARGE_THRESH_BAT0=80    =>    STOP_CHARGE_THRESH_BAT0=80

  # å¼€å¯ç”µæ± ç®¡ç†é˜ˆå€¼æœåŠ¡
  sudo systemctl enable tlp

  # ç»ˆç«¯æ¨¡æ‹Ÿå™¨
  # + æˆ‘ç”¨ä¹ æƒ¯äº†alacrittyè€Œå·²ï¼Œkittyä¹Ÿè¡Œ
  sudo pacman -S alacritty

  # æˆ‘ç°åœ¨ä¸ªäººç”¨çš„æ˜¯X11æ¡Œé¢æœåŠ¡å™¨
  # + åŸå› æ˜¯ä»Šå¹´5æœˆHyprlandåˆšè„±ç¦»wlré‚£ä¼šï¼Œåœ¨Waylandçš„Hyprland(çª—ç®¡åŸç¥)ï¼ŒåŠå¤©å°±å´©æºƒäº†Emacså‡ åæ¬¡ï¼Œéƒ½ç”¨åˆ°æœ‰ç‚¹PTSDäº†ï¼Œæ‰€ä»¥æ•…å…¨é¢è½¬å‘X11
  # + å¦‚æœæ‚¨ç”¨çš„æ˜¯X11çš„è¯ï¼Œé‚£å°±ä¸ç”¨è®¾ç½®ä¸‹é¢çš„ã€‚
  # + å¦‚æœæ‚¨ç”¨çš„æ˜¯Waylandçš„è¯ï¼Œè€Œä¸”è¿˜ç”¨çš„æ˜¯alacrittyç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„è¯ï¼Œé‚£å°±éœ€è¦è®¾ç½®ä¸‹é¢çš„ã€‚
  # alacrittyèµ°x11åè®®
  #			æ”¹æˆ=>æ”¹æˆ      WINIT_UNIX_BACKEND=x11 alacritty
  sudo vim /etc/environment

  # + å¦‚æœæ˜¯kittyçš„è¯ï¼Œæ¢æˆ WINIT_UNIX_BACKEND=x11 kitty
#+end_src

*** (26) æ‰“å­—ä½“è¡¥ä¸
#+begin_quote
åœ¨ [[https://github.com/colfwe/dotfiles][colfwe/dotfiles]] è¿™é‡Œæœ‰è¯´å¦‚ä½•è¯¦ç»†åœ°æ‰“å­—ä½“è¡¥ä¸
#+end_quote

