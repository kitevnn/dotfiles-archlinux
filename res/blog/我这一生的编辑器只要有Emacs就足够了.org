* æˆ‘è¿™ä¸€ç”Ÿçš„ç¼–è¾‘å™¨åªè¦æœ‰Emacså°±å¤Ÿäº†

** 0. ç‰¹åˆ«æ„Ÿè°¢
ç‰¹åˆ«æ„Ÿè°¢
+ [[https://www.gnu.org/][gnu.org]]
+ [[https://alpha.gnu.org/][alpha.gnu.org]]
+ [[https://github.com/emacs-eaf/emacs-application-framework][eafä½œè€…deepinCEOè€ç‹]]
+ [[https://emacs-china.org/][Emacs Chinaé“å‹]]
+ [[https://chatgpt.com/][chatGPT 4o mini]]

*åœ¨è¿™é‡Œï¼Œæˆ‘çœŸçš„ååˆ†æ„Ÿè°¢å„ä½ä½œè€…ä»¬ï¼* â™¥ï¸

*æ„Ÿè°¢ï¼* ğŸ™

** 1. å±•ç¤ºæ•ˆæœ


** 2. å®‰è£…æµç¨‹

_å£°æ˜ğŸ§¬: æˆ‘ä¸ä¸€å®šèƒ½ä¿è¯èƒ½å®Œç¾é‡ç°é…ç½®ï¼Œå› ä¸ºæœ‰äº›å†…å®¹æœ‰å¯èƒ½æ˜¯ä¼šéšæ—¶é—´è€Œé€æ­¥æ›´æ–°çš„ã€‚å¦‚æœæœ‰é—®é¢˜è¯·å–„äº [ä½¿ç”¨æœç´¢å¼•æ“]ã€[é˜…è¯»è¯´æ˜æ–‡æ¡£]ã€[è¯¢é—®chatGPT]ã€[EmacsChinaé“å‹äº¤æµ] ç­‰ç­‰_

*** (1) ä»æºç ç¼–è¯‘ä¸€ä¸ªGNU Emacs

å¦‚æœæ‚¨è·Ÿæˆ‘ä½¿ç”¨çš„ä¹Ÿæ˜¯ArchLinuxçš„è¯ï¼Œè€Œä¸”ä¹Ÿå®‰è£…äº† ~emacs æˆ– emacs-git~ éœ€è¦å…ˆ ~sudo pacman -R emacs æˆ– sudo pacman -R emacs-git~ å†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥ä¿ç•™ã€‚

é¦–å…ˆåœ¨ [[https://alpha.gnu.org/gnu/emacs/pretest/][alpha.gnu.org]] è¿™é‡Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ GNU Emacs

ç„¶åä¸ºäº†è®©ç°ç‰ˆæœ¬(20241031)çš„eaf-browserï¼Œèƒ½å¤Ÿ "focus window"ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åŠ å…¥ ~--with-x-toolkit=gtk3~ ç¼–è¯‘å‚æ•°æ¥è®©eaf-browserè·å¾—æ”¯æŒ

æ‰€ä»¥åœ¨ä¸‹è½½å¹¶è§£å‹çš„ GNU Emacs æ–‡ä»¶å¤¹å†…ï¼Œä½¿ç”¨å‘½ä»¤è¡Œå…ˆåŠ å…¥ç¼–è¯‘å‚æ•°

#+begin_src sh
  # é¦–å…ˆï¼Œè¿™é‡Œæ˜¯GNU Emacs 30.0.92é»˜è®¤ç¼–è¯‘å‚æ•°
  ./configure --sysconfdir=/etc --prefix=/usr --libexecdir=/usr/lib --with-tree-sitter --localstatedir=/var --with-cairo --disable-build-details --with-harfbuzz --with-libsystemd --with-modules 'CFLAGS=-march=x86-64 -mtune=generic -O2 -pipe -fno-plt -fexceptions         -Wp,-D_FORTIFY_SOURCE=3 -Wformat -Werror=format-security         -fstack-clash-protection -fcf-protection         -fno-omit-frame-pointer -mno-omit-leaf-frame-pointer -g -ffile-prefix-map=/build/emacs/src=/usr/src/debug/emacs -flto=auto' 'LDFLAGS=-Wl,-O1 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now          -Wl,-z,pack-relative-relocs -flto=auto'

  # ä¸ºäº†è®©eaf-browser(20241031)è·å¾— "focus window" çš„æ”¯æŒ
  # æˆ‘ä»¬éœ€è¦åŠ å…¥ --with-x-toolkit=gtk3 çš„ç¼–è¯‘é€‰é¡¹
  ./configure --sysconfdir=/etc --prefix=/usr --libexecdir=/usr/lib --with-tree-sitter --localstatedir=/var --with-cairo --disable-build-details --with-harfbuzz --with-libsystemd --with-modules --with-x-toolkit=gtk3 'CFLAGS=-march=x86-64 -mtune=generic -O2 -pipe -fno-plt -fexceptions         -Wp,-D_FORTIFY_SOURCE=3 -Wformat -Werror=format-security         -fstack-clash-protection -fcf-protection         -fno-omit-frame-pointer -mno-omit-leaf-frame-pointer -g -ffile-prefix-map=/build/emacs/src=/usr/src/debug/emacs -flto=auto' 'LDFLAGS=-Wl,-O1 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now          -Wl,-z,pack-relative-relocs -flto=auto'
#+end_src

OKï¼Œç„¶åç¨å¾®ç­‰å¾…ä¸€ä¸‹ï¼Œå°±å¯ä»¥ make äº†

#+begin_src sh
  # æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶
  make 

  # å®‰è£…åˆ°ç³»ç»ŸæŒ‡å®šè·¯å¾„ä¸‹
  sudo make install
#+end_src

*** (2) å®‰è£…eaf
**** I. å®‰è£…åŒ…ç®¡ç†å™¨

***** i. paru

paruæ˜¯ç”¨Rustç¼–å†™çš„ï¼Œæ‰€ä»¥ä½¿ç”¨paruã€‚å½“ç„¶ç”¨Goå†™çš„yayä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå®ƒä»¬ä¸¤è€…çš„åŠŸèƒ½éƒ½æ˜¯å……å½“AURåŠ©æ‰‹ã€‚

#+begin_src sh
  cd ~/.
  mkdir -p .paru
  git clont https://aur.archlinux.org/paru.git
  cd paru
  makepkg -si

  # ç„¶åç­‰å¾…å¹¶ä¸”ä¸€ç›´Yä¸‹å»å°±è¡Œäº†
#+end_src

***** ii. pip

å¦‚æœæ‚¨åŒæ ·ä¹Ÿæ˜¯ä½¿ç”¨Arch Linuxçš„è¯ï¼Œå¯ä»¥é€šè¿‡ ~sudo pacman -S python-pip~ æ¥å®‰è£… pip

#+begin_src sh
  # å®‰è£…pip(pythonåŒ…ç®¡ç†å™¨)
  sudo pacman -S python-pip

  # åŸå› æ˜¯å› ä¸ºåç»­åœ¨eafé‡Œ [ä¸€å®šï¼] ä¼šæœ‰ä¸¤ä¸ªåŒ…å®‰è£…ä¸äº†
  # æˆ‘ä»¬éœ€è¦å®‰è£… sexpdata ä¸ epc ä¸¤ä¸ªåŒ…
  # pip install sexpdata --break-system-packages
  # pip install epc --break-system-packages  
#+end_src

**** II. å®‰è£…eaf

***** i. ä¸‹è½½eaf
å¦‚æœæ‚¨ä¹Ÿæ˜¯ä»Emacs 29.3(æˆ‘è‡ªå·±å¼€å§‹ä½¿ç”¨29.3èµ·çš„è¯ï¼Œå¤§æ¦‚2024å¹´ä»Šå¹´4æœˆä»½å·¦å³å§)å¼€å§‹ä½¿ç”¨çš„è¯ï¼Œå¯ä»¥åœ¨ ~~/.config/emacs/init.el~ æ­¤å¤„é…ç½®ï¼Œæ‰€ä»¥éµå¾ªä¸€å®šçš„å‘½åè§„èŒƒçš„å®‰è£…æ–¹æ³•æ˜¯

#+begin_src sh
  git clone --depth=1 -b master https://github.com/emacs-eaf/emacs-application-framework.git ~/.config/emacs/site-lisp/emacs-application-framework/

  # åˆ°æ—¶å€™éœ€æ·»åŠ è¿™ä¸€è¡Œï¼Œæ¥è¯†åˆ«æ”¾åœ¨site-lispç¬¬ä¸‰æ–¹çš„eaf
  # å¦‚æœæ˜¯åˆä¸Šæ‰‹çš„è¯ï¼Œç›´æ¥å°†ä¸‹è¡Œå­—ç¬¦å…¨éƒ¨æ·»åŠ åœ¨ [~/.config/emacs/init.el] ä¸‹å°±è¡Œäº†
  (add-to-list 'load-path "~/.config/emacs/site-lisp/emacs-application-framework/")
#+end_src

æ‰€ä»¥å¦‚æœæ‚¨æ˜¯Emacsè¿‘å¹´æ¥çš„è€ç”¨æˆ·çš„è¯ï¼Œæ¯”å¦‚è¯´ä»Emacs 24å¼€å§‹æ—¶å€™èµ·çš„è¯(æˆ‘åªæ˜¯ä¸¾ä¸ªä¾‹å“ˆï¼)ï¼Œæ‰€ä»¥éµå¾ªä¸€å®šçš„å‘½åè§„èŒƒçš„å®‰è£…æ–¹æ³•æ˜¯

#+begin_src sh
  git clone --depth=1 -b master https://github.com/emacs-eaf/emacs-application-framework.git ~/.emacs.d/site-lisp/emacs-application-framework/

  # åˆ°æ—¶å€™éœ€æ·»åŠ è¿™ä¸€è¡Œï¼Œæ¥è¯†åˆ«æ”¾åœ¨site-lispç¬¬ä¸‰æ–¹çš„eafã€‚
  # å¦‚æœæ˜¯åˆä¸Šæ‰‹çš„è¯ï¼Œç›´æ¥å°†ä¸‹è¡Œå­—ç¬¦å…¨éƒ¨æ·»åŠ åœ¨ [~/.emacs.d/init.el] ä¸‹å°±è¡Œäº†
  (add-to-list 'load-path "~/.emacs.d/site-lisp/emacs-application-framework/")  
#+end_src

***** ii. æ‰§è¡Œeaf

#+begin_src sh
  # ç›´æ¥å®‰è£…
  ./install-eaf.py

  # å¹¶åœ¨27ä¸ªé€‰é¡¹ä¸­ï¼Œé€‰æ‹©æ‚¨è‡ªå·±æƒ³è¦çš„eaf(emacs-application-framework)åº”ç”¨
  # åƒæˆ‘è‡ªå·±çš„è¯ï¼Œåªé€‰æ‹©äº†eaf-browserï¼Œç„¶åè®°å¾—ä¸€å®šè¦ (require 'eaf)ä¸(require 'eaf-ä½ è‡ªå·±æ‰“ç®—å®‰è£…çš„eafåº”ç”¨çš„åç§°)
  # ç„¶å [ä¸€å®šï¼] ä¼šæœ‰ä¸¤ä¸ªåŒ…å®‰è£…ä¸äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹‹å‰å®‰è£…çš„pipå°±æ´¾ä¸Šäº†ç”¨åœº
  pip install sexpdata --break-system-packages  # --break-system-packages æ­¤flagå¿…é¡»åŠ ï¼Œå¦‚æœåªåœ¨ venv è™šæ‹Ÿç¯å¢ƒé‡Œï¼Œæ˜¯è¯†åˆ«ä¸äº†è¿™ä¸ªåŒ…çš„ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±å°è¯•è¿‡çš„ã€‚
  pip install epc --break-system-packages       # --break-system-packages æ­¤flagå¿…é¡»åŠ ï¼Œå¦‚æœåªåœ¨ venv è™šæ‹Ÿç¯å¢ƒé‡Œï¼Œæ˜¯è¯†åˆ«ä¸äº†è¿™ä¸ªåŒ…çš„ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±å°è¯•è¿‡çš„ã€‚  
#+end_src

***** iii. é…ç½®eaf

#+begin_src elisp
  ; åœ¨æ‚¨çš„åŠ å…¥äº† (add-to-list 'load-path "~/.emacs.d/site-lisp/emacs-application-framework/") æ­¤è¡Œä»£ç çš„æ–‡ä»¶å¤„
  ; æœ‰å¯èƒ½æ˜¯ [~/.config/emacs/init.el] æˆ–æœ‰å¯èƒ½æ˜¯ [~/.emacs.d/init.el] æˆ–æœ‰å¯èƒ½æ˜¯ [å¦‚æœæ‚¨æœ‰è®¾ç½®äº†load-pathçš„åœ°æ–¹]
  ; 
  ; è¿™å¾—çœ‹æ‚¨è‡ªå·±æ˜¯
  ;   git clone --depth=1 -b master https://github.com/emacs-eaf/emacs-application-framework.git [~/.config/emacs/ è¿™ä¸ªè·¯å¾„ä¸‹] site-lisp/emacs-application-framework/
  ; è¿˜æ˜¯  
  ;   git clone --depth=1 -b master https://github.com/emacs-eaf/emacs-application-framework.git [~/.emacs.d/ è¿™ä¸ªè·¯å¾„ä¸‹] site-lisp/emacs-application-framework/
  ;
  ; ç„¶åæˆ‘ä»¬åŠ å…¥
  (require 'eaf)
  (require 'eaf-browser)  
#+end_src

å¦‚æœä¸€åˆ‡æ²¡é—®é¢˜çš„è¯ï¼Œåº”è¯¥æ¥è¯´å°±æ²¡é—®é¢˜äº†ï¼Œæœ€åæ‰§è¡Œ ~M-x eaf-open-browswer~ æ‰“å¼€ ~æ‚¨æƒ³è¦æ‰“å¼€çš„ç½‘å€æµ‹è¯•ä¸€ä¸‹~

å¦‚æœæœ‰é—®é¢˜çš„è¯ï¼Œå¯ä»¥åˆ° ~*message buffer~ å¤„æŸ¥çœ‹æç¤ºä¿¡æ¯ã€‚
